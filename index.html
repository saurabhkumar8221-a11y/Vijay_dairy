<!DOCTYPE html>
<html>
<head>
<title>Full System</title>
<style>
body {font-family: Arial; padding:20px;}
input, select {width:100%; padding:8px; margin:5px 0;}
button {padding:10px; background:green; color:white; border:none; cursor:pointer;}
.success {color:green; font-weight:bold;}
.error {color:red; font-weight:bold;}
hr{margin:20px 0;}
</style>
</head>
<body>

<h2>User Registration</h2>

<select id="userType">
<option value="Agent">Agent</option>
<option value="Retailer">Retailer</option>
</select>

<input id="lapu" placeholder="LAPU Number">
<input id="contact" placeholder="Contact Number">
<input id="shopName" placeholder="Shop Name">
<input id="owner" placeholder="Owner Name">
<input id="address" placeholder="Address">
<input id="area" placeholder="Area">
<input id="village" placeholder="Village">
<input id="zone" placeholder="Zone">
<input id="latitude" placeholder="Latitude">
<input id="longitude" placeholder="Longitude">

<button onclick="saveUser()">Save User</button>

<hr>

<h2>Distributor Stock</h2>

<input id="distName" placeholder="Distributor Name">
<input id="simType" placeholder="SIM Type">
<input id="simQty" placeholder="Quantity">
<input id="remark" placeholder="Remark">

<button onclick="saveStock()">Save Stock</button>

<hr>

<h3 id="msg"></h3>

<script>

const url = "https://script.google.com/macros/s/AKfycbzl0ouM0W3I14HO361ybu0Y5SSZXrOWnk6zzAfLZbUCKLxQ94TV_vdlcQNqmU3eTphTKQ/exec";

function postData(data){
  fetch(url,{
    method:"POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(data)
  })
  .then(res => res.json())
  .then(res => {
    let m = document.getElementById("msg");

    if(res.status === "success"){
      m.className = "success";
      m.innerHTML = "✔ " + res.message +
      (res.agentCode ? "<br>Agent Code: " + res.agentCode : "");
    } else {
      m.className = "error";
      m.innerHTML = "✖ " + res.message;
    }
  })
  .catch(err => {
    document.getElementById("msg").innerHTML = "Server Error";
  });
}

function saveUser(){
  postData({
    type:"user",
    userType:userType.value,
    lapu:lapu.value,
    contact:contact.value,
    shopName:shopName.value,
    owner:owner.value,
    address:address.value,
    area:area.value,
    village:village.value,
    zone:zone.value,
    latitude:latitude.value,
    longitude:longitude.value
  });
}

function saveStock(){
  postData({
    type:"distributorStock",
    distributorName:distName.value,
    simType:simType.value,
    simQuantity:simQty.value,
    remark:remark.value
  });
}

</script>

</body>
</html>
