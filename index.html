<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <style>
    body { font-family: Arial; margin:0; }
    .sidebar {
      width: 220px;
      background:#111;
      color:white;
      position: fixed;
      height:100%;
      padding-top:20px;
    }
    .sidebar button {
      display:block;
      width:100%;
      padding:15px;
      border:none;
      background:none;
      color:white;
      text-align:left;
      cursor:pointer;
    }
    .sidebar button:hover { background:#333; }
    .content {
      margin-left:230px;
      padding:20px;
    }
    .tab { display:none; }
    input, select { padding:8px; width:300px; margin-bottom:10px; }
    button.submit { background:green; color:white; padding:10px 20px; }
  </style>

  <script>
    function showTab(id) {
      document.querySelectorAll(".tab").forEach(t => t.style.display="none");
      document.getElementById(id).style.display="block";
    }

    function registerUser() {
      navigator.geolocation.getCurrentPosition(function(pos){
        const data = {
          userType: userType.value,
          lapu: lapu.value,
          contact: contact.value,
          shopName: shopName.value,
          owner: owner.value,
          lat: pos.coords.latitude,
          lng: pos.coords.longitude,
          address: "",
          area: "",
          zone: zone.value
        };
        google.script.run.withSuccessHandler(function(code){
          alert("Registered! Agent Code: " + code);
        }).registerUser(data);
      });
    }

    function addStock() {
      google.script.run.withSuccessHandler(function(res){
        alert("Total Stock: "+res);
      }).addStock({stock:stock.value});
    }

    function transferSIM() {
      google.script.run.withSuccessHandler(alert)
      .transferSIM({lapu:lapuT.value,agentCode:agentCodeT.value,qty:qty.value});
    }

    function activation() {
      const file = image.files[0];
      const reader = new FileReader();
      reader.onloadend=function(){
        google.script.run.withSuccessHandler(alert)
        .saveActivation({
          agentCode:agentCodeA.value,
          mobile:mobile.value,
          operator:operator.value,
          requestType:requestType.value,
          amount:amount.value,
          imageBase64:reader.result,
          imageType:file?file.type:""
        });
      };
      if(file) reader.readAsDataURL(file); else reader.onloadend();
    }
  </script>
</head>
<body>

<div class="sidebar">
  <button onclick="showTab('user')">User Registration</button>
  <button onclick="showTab('stock')">Distributor Stock</button>
  <button onclick="showTab('transfer')">SIM Transfer</button>
  <button onclick="showTab('activation')">MNP / PORT Service</button>
  <button onclick="showTab('map')">Area Map</button>
  <button onclick="showTab('report')">Reports</button>
</div>

<div class="content">

<div id="user" class="tab">
<h2>User Registration</h2>
<select id="userType"><option>Agent</option><option>Retailer</option></select><br>
<input id="lapu" placeholder="LAPU"><br>
<input id="contact" placeholder="Contact"><br>
<input id="shopName" placeholder="Shop Name"><br>
<input id="owner" placeholder="Owner"><br>
<select id="zone"><option>Patory</option><option>Sarairanjan</option></select><br>
<button class="submit" onclick="registerUser()">Submit</button>
</div>

<div id="stock" class="tab">
<h2>Distributor Stock</h2>
<input id="stock" placeholder="Stock Add"><br>
<button class="submit" onclick="addStock()">Submit</button>
</div>

<div id="transfer" class="tab">
<h2>SIM Transfer</h2>
<input id="lapuT" placeholder="LAPU"><br>
<input id="agentCodeT" placeholder="Agent Code"><br>
<input id="qty" placeholder="Quantity"><br>
<button class="submit" onclick="transferSIM()">Submit</button>
</div>

<div id="activation" class="tab">
<h2>MNP / PORT Service</h2>
<input id="agentCodeA" placeholder="Agent Code"><br>
<input id="mobile" placeholder="Customer Mobile"><br>
<select id="operator">
<option>JIO</option><option>VI</option><option>BSNL</option>
</select><br>
<select id="requestType">
<option>Recharge</option>
<option>FRC</option>
<option>New Activation</option>
<option>Replacement</option>
</select><br>
<input id="amount" placeholder="Amount"><br>
<input type="file" id="image"><br>
<button class="submit" onclick="activation()">Submit</button>
</div>

<div id="map" class="tab">
<h2>Area Map</h2>
<p>Map Integration Next Step</p>
</div>

<div id="report" class="tab">
<h2>Reports Dashboard</h2>
<p>Dashboard Next Step</p>
</div>

</div>

</body>
</html>
