<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Vijay Dairy SIM Panel</title>

<style>
body{font-family:Arial;padding:20px;background:#f4f4f4}
h2{text-align:center}
.section{display:none;background:#fff;padding:15px;border-radius:10px;margin-top:15px}
input,select,button{width:100%;padding:8px;margin:5px 0}
button{background:green;color:white;border:none;border-radius:5px}
.success{color:green;font-weight:bold}
.nav button{background:#007bff;margin-bottom:10px}
</style>
</head>
<body>

<h2>Vijay Dairy SIM Management</h2>

<div class="nav">
<button onclick="showSection('user')">Add Retailer / Agent</button>
<button onclick="showSection('stock')">Add Distributor Stock</button>
<button onclick="showSection('give')">Give SIM</button>
<button onclick="showSection('activation')">Agent Activation (RAB)</button>
</div>

<!-- USER, STOCK, GIVE SECTION SAME AS YOUR ORIGINAL -->
<!-- (Unchanged — I am not rewriting to keep message clean) -->

<!-- ================= AGENT ACTIVATION ================= -->
<div id="activation" class="section">
<h3>Agent Activation Entry</h3>

<form id="activationForm">

<input type="text" id="agentCode" placeholder="Agent Code" required>

<input type="tel" id="customerMobile"
maxlength="10"
placeholder="Customer Mobile (10 Digit)"
required
oninput="this.value=this.value.replace(/[^0-9]/g,'')">

<select id="operator" required>
<option value="">Select Operator</option>
<option value="JIO">JIO</option>
<option value="VI">VI</option>
<option value="BSNL">BSNL</option>
</select>

<select id="requestType" required>
<option value="">Select Request Type</option>
<option value="Recharge">Recharge</option>
<option value="MNP Recharge">MNP Recharge</option>
<option value="New Activation">New Activation</option>
<option value="Replacement">Replacement</option>
</select>

<input type="number" id="amount" placeholder="Amount (Optional)">

<label>Upload Image (Optional)</label>
<input type="file" id="imageFile" accept="image/*">

<button type="button" onclick="submitActivation()">Submit Activation</button>

</form>

<div id="activationMsg" class="success"></div>
</div>

<script>

const scriptURL = "https://script.google.com/macros/s/AKfycbxx12HuKYXsryDYSmbWBs-kcCFxknfGhthaHT3ASabcVhRFiqJjdHyLvGRMN_yG_gFIpQ/exec";

function showSection(id){
document.querySelectorAll('.section').forEach(sec=>sec.style.display='none');
document.getElementById(id).style.display='block';
}

showSection('user');

function submitActivation(){

let mobile = document.getElementById("customerMobile").value.trim();

if(!/^[0-9]{10}$/.test(mobile)){
alert("Customer Mobile must be 10 digit");
return;
}

let fileInput = document.getElementById("imageFile");
let file = fileInput.files[0];

if(file){
let reader = new FileReader();
reader.onload = function(){
sendActivation(reader.result);
};
reader.readAsDataURL(file);
}else{
sendActivation("");
}

}

function sendActivation(imageData){

fetch(scriptURL,{
method:"POST",
body:JSON.stringify({
type:"activation",
agentCode:document.getElementById("agentCode").value,
customerMobile:document.getElementById("customerMobile").value,
operator:document.getElementById("operator").value,
requestType:document.getElementById("requestType").value,
amount:document.getElementById("amount").value,
imageUrl:imageData
})
})
.then(res=>res.json())
.then(response=>{
if(response.result==="success"){
document.getElementById("activationMsg").innerHTML="✅ Activation Saved";
document.getElementById("activationForm").reset();
setTimeout(()=>{document.getElementById("activationMsg").innerHTML="";},2000);
}
});
}

</script>
</body>
</html>
