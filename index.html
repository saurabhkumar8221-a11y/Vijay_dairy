<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>SIM Management Panel</title>

<style>
body {font-family: Arial; margin:0; background:#f2f2f2;}
.tab {display:flex; overflow:auto; background:#111;}
.tab button {
  flex:1;
  padding:14px;
  color:white;
  background:#111;
  border:none;
  cursor:pointer;
}
.tab button.active {background:#28a745;}
.section {display:none; padding:15px;}
input, select {
  width:100%;
  padding:10px;
  margin-bottom:10px;
  border-radius:6px;
  border:1px solid #ccc;
}
button.submit {
  background:#28a745;
  color:white;
  padding:12px;
  border:none;
  border-radius:6px;
  width:100%;
}
h2 {margin-top:0;}
</style>
</head>

<body>

<div class="tab">
  <button onclick="openTab('user')">User</button>
  <button onclick="openTab('stock')">Distributor Stock</button>
  <button onclick="openTab('sim')">SIM Transfer</button>
  <button onclick="openTab('activation')">MNP / Service</button>
  <button onclick="openTab('map')">Area Map</button>
  <button onclick="openTab('report')">Dashboard</button>
</div>

<!-- USER -->
<div id="user" class="section">
<h2>User Registration</h2>

<select id="userType">
<option value="Agent">Agent</option>
<option value="Retailer">Retailer</option>
</select>

<input type="tel" id="lapu" placeholder="LAPU (10 Digit)" maxlength="10">
<input type="tel" id="contact" placeholder="Contact (10 Digit)" maxlength="10">
<input type="text" id="shopName" placeholder="Shop Name">
<input type="text" id="owner" placeholder="Owner Name">
<input type="text" id="zone" placeholder="Zone">

<button class="submit" onclick="saveUser()">Save User</button>
</div>

<!-- DISTRIBUTOR STOCK -->
<div id="stock" class="section">
<h2>Add Distributor Stock</h2>
<input type="number" id="stockQty" placeholder="Add SIM Quantity">
<button class="submit" onclick="addStock()">Add Stock</button>
</div>

<!-- SIM TRANSFER -->
<div id="sim" class="section">
<h2>SIM Transfer</h2>
<input type="text" id="simLapu" placeholder="Distributor LAPU">
<input type="text" id="simAgentCode" placeholder="Agent Code">
<input type="number" id="simQty" placeholder="SIM Quantity">

<select id="transactionType">
<option value="ADD">ADD</option>
<option value="GIVEN">GIVEN</option>
</select>

<button class="submit" onclick="saveSim()">Save Transfer</button>
</div>

<!-- ACTIVATION -->
<div id="activation" class="section">
<h2>MNP / Service</h2>

<input type="text" id="actAgentCode" placeholder="Agent Code">
<input type="tel" id="customerMobile" placeholder="Customer Mobile (10 Digit)" maxlength="10">

<select id="operator">
<option value="JIO">JIO</option>
<option value="VI">VI</option>
<option value="BSNL">BSNL</option>
</select>

<select id="requestType">
<option value="Recharge">Recharge</option>
<option value="FRC">FRC</option>
<option value="New Activation">New Activation</option>
<option value="Replacement">Replacement</option>
</select>

<input type="number" id="amount" placeholder="Amount (Optional)">

<button class="submit" onclick="saveActivation()">Submit</button>
</div>

<!-- MAP -->
<div id="map" class="section">
<h2>Area Map</h2>
<p>Retailer locations will show here (Google Map embed later)</p>
</div>

<!-- DASHBOARD -->
<div id="report" class="section">
<h2>Dashboard</h2>
<p>Reports & stock summary here</p>
</div>

<script>

var scriptURL = "https://script.google.com/macros/s/AKfycbzl0ouM0W3I14HO361ybu0Y5SSZXrOWnk6zzAfLZbUCKLxQ94TV_vdlcQNqmU3eTphTKQ/exec";

function openTab(tabName) {
  var i, sections = document.getElementsByClassName("section");
  for (i = 0; i < sections.length; i++) {
    sections[i].style.display = "none";
  }
  document.getElementById(tabName).style.display = "block";
}

openTab("user");

// USER SAVE
function saveUser() {
navigator.geolocation.getCurrentPosition(function(position) {

var data = {
type:"user",
userType:document.getElementById("userType").value,
lapu:document.getElementById("lapu").value,
contact:document.getElementById("contact").value,
shopName:document.getElementById("shopName").value,
owner:document.getElementById("owner").value,
latitude:position.coords.latitude,
longitude:position.coords.longitude,
address:"",
area:"",
zone:document.getElementById("zone").value
};

fetch(scriptURL,{method:"POST",body:JSON.stringify(data)})
.then(res=>res.json())
.then(response=>{
alert(response.message);
if(response.agentCode){
alert("Your Agent Code: "+response.agentCode);
}
});
});
}

// ADD STOCK
function addStock(){
var data={
type:"sim",
lapu:"",
agentCode:"",
simGiven:document.getElementById("stockQty").value,
transactionType:"ADD"
};
fetch(scriptURL,{method:"POST",body:JSON.stringify(data)})
.then(res=>res.json())
.then(response=>alert(response.message));
}

// SIM TRANSFER
function saveSim(){
var data={
type:"sim",
lapu:document.getElementById("simLapu").value,
agentCode:document.getElementById("simAgentCode").value,
simGiven:document.getElementById("simQty").value,
transactionType:document.getElementById("transactionType").value
};
fetch(scriptURL,{method:"POST",body:JSON.stringify(data)})
.then(res=>res.json())
.then(response=>alert(response.message));
}

// ACTIVATION
function saveActivation(){
var data={
type:"activation",
agentCode:document.getElementById("actAgentCode").value,
customerMobile:document.getElementById("customerMobile").value,
operator:document.getElementById("operator").value,
requestType:document.getElementById("requestType").value,
amount:document.getElementById("amount").value,
imageUrl:""
};
fetch(scriptURL,{method:"POST",body:JSON.stringify(data)})
.then(res=>res.json())
.then(response=>alert(response.message));
}

</script>

</body>
</html>
